<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0068)http://localhost:8080/MessageServlet?oper=revertMessage&messageId=27 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<!--<base href="http://localhost:8080/">--><base href=".">

	<title>回复留言</title>

	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta http-equiv="description" content="This is my page">
	<link href="images/common.css" type="text/css" rel="stylesheet">
	<script src="/js/jquery/jquery-1.12.4.min.js"></script>
	<script src="/js/jquery/jquery.form.js"></script>
	<script src="/js/moment/moment.min.js"></script>
	<script src="/js/numeral/numeral.min.js"></script>
	<script src="/js/numeral/chs.min.js"></script>
	<script src="/js/common/base.js"></script>
	<script src="/js/common/normal.js"></script>
	<script type="text/javascript" src="images/ckeditor.js.下载"></script>
	<style type="text/css">
		.tab{ }
		.tab td{ border:solid 1px #85ACE0;}
		.tab1{ }
		.tab1 td{ border:#fff; }
	</style>


	<script type="text/javascript" src="images/config.js.下载"></script><style id="tsbrowser_video_independent_player_style" type="text/css">
		[tsbrowser_force_max_size] {
			width: 100% !important;
			height: 100% !important;
			left: 0px !important;
			top: 0px !important;
			margin: 0px !important;
			padding: 0px !important;
			transform: none !important;
		}
		[tsbrowser_force_fixed] {
			position: fixed !important;
			z-index: 9999 !important;
			background: black !important;
		}
		[tsbrowser_force_hidden] {
			opacity: 0 !important;
			z-index: 0 !important;
		}
		[tsbrowser_hide_scrollbar] {
			overflow: hidden !important;
		}
		[tsbrowser_display_none] {
			display: none !important;
			visibility: hidden !important;
			opacity: 0 !important;
		}
		[tsbrowser_force_show] {
			display: black !important;
			visibility: visible !important;
			opacity: 0;
		}</style><link rel="stylesheet" type="text/css" href="images/editor.css"><script type="text/javascript" src="images/zh-cn.js.下载"></script><script type="text/javascript" src="images/default.js.下载"></script></head>

<body background="images/bookbg.gif" leftmargin="0" topmargin="3" marginheight="0" marginwidth="0">
<div align="center">
	<a href="http://localhost:8080/MessageServlet"><img src="images/welcome.jpg"></a>
</div>
<div align="center">
	<table border="0" cellspacing="1" cellpadding="4" width="750" align="center">
		<tbody>
		<tr>
			<td class="unnamed2" height="20" colspan="2" align="right"><marquee onmouseover="stop();" onmouseout="start();" scrollamount="3">
				<b><font color="#000099">欢迎您使用&nbsp;留言本&nbsp;</font> </b>
			</marquee></td>
		</tr>
		<tr>
			<td><a style="margin-left:-5px;" href="index.html">首页</a>
				<font> &gt; </font><a href="1liuyanban.html">留言板</a>
				<font> &gt; </font>回复留言
				<hr style="margin-left:-5px;">
			</td>
		</tr>
		</tbody>
	</table>
	<div style="WIDTH: 750px" align="center">
		<div align="left">
			<table border="0" cellspacing="0" cellpadding="0" height="20">
				<tbody>
				<tr>
					<td background="images/titlemu_1.gif" width="11"></td>
					<td background="images/titlemu_2.gif">
						<div align="center">
							<a class="jdmenu"><b>留言</b>
							</a>
						</div>
					</td>
					<td background="images/titlemu_3.gif" width="12"></td>
				</tr>
				</tbody>
			</table>
		</div>
	</div>
	<!-- 显示留言内容 -->
	<table style="BORDER-COLLAPSE: collapse" border="0" cellspacing="0" bordercolor="#111111" cellpadding="0" width="750" align="center">
		<tbody>
		<tr>
			<td width="2%"><img border="0" src="images/T_left.gif">
			</td>
			<td width="96%"><img src="images/Tt_bg.jpg" width="554" height="24" style="margin-top:3px;"></td>
			<td width="2%"><img border="0" src="images/T_right.gif">
			</td>
		</tr>
		</tbody>
	</table>
	<table style="BORDER-COLLAPSE: collapse; WORD-WRAP: break-word;" cellspacing="0" cellpadding="3" width="750" align="center" height="51" class="tab">
		<tbody><tr>
			<td style="background-color:#FFE8E8;"><div><span style="font-weight:bold; float: left ">标题：</span  ><div id="messageTitle" style="float: left"></div></div></td>
		</tr>
		<tr>
			<td height="150"><div><p id="messageContent">
			</p>
			</div></td>
		</tr>
		<tr>
			<td><div><div id = "writer" style="float: left"></div>
				<div style="float: left ">写于</div>
				<div id="writeDate" style="float: left"></div></div></td>
		</tr>
		</tbody></table>
	<table style="BORDER-COLLAPSE: collapse" border="0" cellspacing="0" cellpadding="0" width="750" align="center">
		<tbody>
		<tr>
			<td><img border="0" src="images/T_bottomleft.gif"></td>
			<td background="images/T_bottombg.gif" width="100%"></td>
			<td><img border="0" src="images/T_bottomright.gif"></td>
		</tr>
		</tbody>
	</table>
	<br>
	<div style="text-align:left;width:750px;margin:auto;"><h3>回复内容：</h3></div>

	<table style="BORDER-COLLAPSE: collapse" border="0" cellspacing="0" bordercolor="#111111" cellpadding="0" width="750" align="center">
		<tbody>
		<tr>
			<td width="2%"><img border="0" src="images/T_left.gif">
			</td>
			<td width="96%"><img src="images/Tt_bg.jpg" width="554" height="24" style="margin-top:3px;"></td>
			<td width="2%"><img border="0" src="images/T_right.gif">
			</td>
		</tr>
		</tbody>
	</table>
	<table style="BORDER-COLLAPSE: collapse; WORD-WRAP: break-word;" cellspacing="0" cellpadding="3" width="750" align="center" height="51" class="tab">
		<tbody id="revertBody">
		</tbody>

	</table>
	<table style="BORDER-COLLAPSE: collapse" border="0" cellspacing="0" cellpadding="0" width="750" align="center">
		<tbody>
		<tr>
			<td><img border="0" src="images/T_bottomleft.gif"></td>
			<td background="images/T_bottombg.gif" width="100%"></td>
			<td><img border="0" src="images/T_bottomright.gif"></td>
		</tr>
		</tbody>
	</table>
	<br>
	<table style="BORDER-COLLAPSE: collapse; WORD-WRAP: break-word;" cellspacing="0" cellpadding="3" width="750" align="center" height="51" class="tab">
		<thead><tr>
			<td style="background-color:#FFE8E8;" align="center">快速回复</td>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td height="150">
				<form action="" id = "dd" class="jqtransform">
					<table cellspacing="0" cellpadding="3" width="750" align="center" height="130" class="tab1">
						<tr>
							<td class="td_right"></td>
							<td><input type="hidden" id="reverId" name="revertId" value="999" class="input-text lh30" size="40"></td>
						</tr>
						<tr>
							<td class="td_right"></td>
							<td><input type="hidden" id="idd" name="messageId" class="input-text lh30" size="40"></td>
						</tr>
						<tr>
							<td class="td_right"  align="center" height="50">回复内容：</td>
							<td class="">
								<textarea name="content" id="cont" cols="60" rows="10" class="textarea"  style="background:none;" ></textarea>
							</td>
						</tr>
						<tr>
							<td class="td_right"  align="center" height="50">作者：</td>
							<td class="">
								<input type="text" name="writer" id = "writ"  style="background:none;" class="input-text lh30" size="40">
							</td>

						</tr>
						<tr>
							<td class="td_right"  align="center" height="50">日期：</td>
							<td><input type="date" name="writerDate"class="input-text lh30" size="40" id="wri"  style="background:none;"></td>
						</tr>

						<tr>
							<td class="td_right">&nbsp;</td>
							<td class="">
								<input type="button" name="button" class="btn btn82 btn_save2" style="background:none;" value="确定" onclick="add()">
							</td>
						</tr>
					</table>
				</form>
			</td>
		</tr>
		</tbody>

	</table>

	<br>
	<br>
	<br>
</div>
<script type="text/javascript">
    function checkForm(){
        var Form = document.form;
        var content = Form.content.value;
        var writer = Form.writer.value;
        if(writer==""){
            alert("留言人不能为空");
            return false;
        }

        return true;
    }
</script>
<script>

    $(function () {
        getMessageById();
        initRevert();
    });

    function getMessageById() {
        var id = $.getHrefParam("id");
        $("#idd").val(id);
        alert(id);
        $.post("/message/getMessageById",{"id":id}, function (result)
		{
            alert(6);
            var obj = $.dealJSONObj(result);
            var idd = obj.data.messageId;
            var title = obj.data.title;
            var content = obj.data.content;
            var writer = obj.data.writer;
            var writeDate = obj.data.writeDate;
            writeDate=moment(writeDate,'x').format("YYYY-MM-DD");
            $("#messageTitle").html(title);
            $("#messageContent").html(content);
            $("#writer").html(writer);
            $("#writeDate").html(writeDate);

        })
    }


    function initRevert() {
        var id= $.getHrefParam("id");
        $.post("/getRevertByMessageId",{"id":id}, function (result) {
            //用来解析json
            var obj = $.dealJSONObj(result);
            //code会返回一个0或者非0的数字，如果0，使用!obj.code就返回true，表示查询成功
            if (!obj.code) {
                var s = "";
                //创建了一个带有占位符的字符串
                //JavaScript:void(0)表示点击超链接的时候不会跳转到任何一个地址
                var str = "<tr class='tr' height=\"150\" ><td>{2}</td></tr>" +
                    "<tr class='tr'><td>{3}写于:{4}</td></tr>"+
                    "<tr class='tr' bgcolor='#FFE8E8'height=\"10\" ><td></td></tr>";
                //$.each就可以遍历集合，其中的v就相当于是一个news对象
                $.each(obj.data, function (k, v) {
                    s += str.formatStr(
                        v.revertId,
                        v.messageId,
                        v.content,
                        v.writer,
                        moment(v.writeDate,'x').format("YYYY-MM-DD")
                        //'2019-07-25'
                        // v.writeDate//日期
                        // moment(v.writeDate,'x').format("YYYY-MM-DD")

                    )
                });

                $("#revertBody").empty(); //$("#data")叫做jQuery的选择器，它是一个id选择器，用来得到id值为data的一个节点
                $("#revertBody").html(s);
            } else {
                alert(obj.msg);
            }
        })
    }
    function add() {
        $.post("/addRevert",$("#dd").serialize(),function (result) {
            var obj = $.dealJSONObj(result);
            if(!obj.code) {
                getMessageById();
                initRevert();
            }
        })
    }

</script>

</body></html>